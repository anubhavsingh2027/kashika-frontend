<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Create Account â€” Kashika Travels</title>
    <link
      href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <style>
      @keyframes float {
        0% { transform: translateY(0px); }
        50% { transform: translateY(-10px); }
        100% { transform: translateY(0px); }
      }
      @keyframes slideUp {
        from { transform: translateY(1rem); opacity: 0; }
        to { transform: translateY(0); opacity: 1; }
      }
      @keyframes pulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.05); }
      }
      @keyframes gradientFlow {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
      }
      .animate-float { animation: float 3s ease-in-out infinite; }
      .animate-slide-up { animation: slideUp 0.3s ease-out; }
      .animate-pulse-slow { animation: pulse 3s ease-in-out infinite; }
      .animate-gradient { animation: gradientFlow 3s ease infinite; }

      .bg-grid-slate-100 {
        background-image: linear-gradient(to right, #f1f5f930 1px, transparent 1px),
                         linear-gradient(to bottom, #f1f5f930 1px, transparent 1px);
        background-size: 24px 24px;
      }

      .shimmer {
        position: relative;
        overflow: hidden;
      }
      .shimmer::after {
        content: '';
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        background: linear-gradient(
          90deg,
          rgba(255, 255, 255, 0) 0%,
          rgba(255, 255, 255, 0.3) 50%,
          rgba(255, 255, 255, 0) 100%
        );
        animation: shimmer 2s infinite;
      }
    </style>
  </head>
  <body class="antialiased text-slate-800">
    <!-- Enhanced Background with multiple layers -->
    <div class="fixed inset-0 bg-gradient-to-br from-white via-blue-50 to-indigo-50"></div>
    <div class="fixed inset-0 bg-[radial-gradient(ellipse_at_top_right,_var(--tw-gradient-stops))] from-sky-100/60 via-transparent to-transparent"></div>
    <div class="fixed inset-0 bg-[radial-gradient(ellipse_at_bottom_left,_var(--tw-gradient-stops))] from-purple-100/60 via-transparent to-transparent"></div>
    <div class="fixed inset-0 backdrop-blur-[2px]"></div>

    <nav id="navbar" class="sticky top-0 z-40"></nav>

    <main class="min-h-screen flex items-center justify-center p-6 relative">
      <div class="max-w-4xl w-full grid md:grid-cols-[1fr,1.5fr] gap-8 items-center">
        <!-- Left Section -->
        <div class="hidden md:flex flex-col items-center space-y-8 p-8">
          <div class="relative animate-float">
            <div class="absolute inset-0 bg-gradient-to-r from-sky-400 to-indigo-400 rounded-3xl blur-2xl opacity-20"></div>
            <div class="relative">
              <div class="absolute -inset-1 bg-gradient-to-r from-sky-500 to-indigo-500 rounded-3xl blur opacity-30 group-hover:opacity-40 transition duration-1000"></div>
              <img
                src="./assets/images/logo.png"
                class="relative h-32 w-32 rounded-3xl shadow-lg ring-1 ring-slate-100/90"
                alt="logo"
              />
            </div>
          </div>
          <div class="text-center space-y-4">
            <h1 class="text-3xl font-bold bg-gradient-to-r from-sky-600 to-indigo-600 bg-clip-text text-transparent">
              Welcome to Kashika Travels
            </h1>
            <p class="text-slate-600 max-w-sm leading-relaxed">
              Join our community and experience the best travel services across
              India. Your journey begins here!
            </p>
            <!-- Enhanced Features List -->
            <div class="mt-8 space-y-4">
              <div class="p-4 rounded-xl bg-white/80 backdrop-blur-md ring-1 ring-white/50 shadow-lg transform hover:scale-105 transition-all duration-300 hover:shadow-indigo-500/10 group">
                <i class="fas fa-gift text-2xl mb-2 text-transparent bg-clip-text bg-gradient-to-r from-indigo-500 to-purple-500 group-hover:scale-110 transition-transform"></i>
                <p class="text-gray-700 font-medium">Exclusive travel packages</p>
              </div>
              <div class="p-4 rounded-xl bg-white/80 backdrop-blur-md ring-1 ring-white/50 shadow-lg transform hover:scale-105 transition-all duration-300 hover:shadow-purple-500/10 group">
                <i class="fas fa-headset text-2xl mb-2 text-transparent bg-clip-text bg-gradient-to-r from-purple-500 to-pink-500 group-hover:scale-110 transition-transform"></i>
                <p class="text-gray-700 font-medium">24/7 customer support</p>
              </div>
              <div class="p-4 rounded-xl bg-white/80 backdrop-blur-md ring-1 ring-white/50 shadow-lg transform hover:scale-105 transition-all duration-300 hover:shadow-indigo-500/10 group">
                <i class="fas fa-badge-check text-2xl mb-2 text-transparent bg-clip-text bg-gradient-to-r from-indigo-500 to-purple-500 group-hover:scale-110 transition-transform"></i>
                <p class="text-gray-700 font-medium">Best price guarantee</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Right Section - Form -->
        <form
          id="registerForm"
          class="w-full bg-white/95 rounded-2xl shadow-xl p-8 space-y-6 animate-slide-up backdrop-blur-xl ring-1 ring-slate-100/90 relative overflow-hidden group"
        >
          <!-- Decorative background elements -->
          <div class="absolute inset-0 bg-gradient-to-br from-sky-50 to-indigo-50 opacity-50"></div>
          <div class="absolute inset-0 bg-grid-slate-100/[0.03]"></div>
          <div class="absolute -left-4 -top-4 w-24 h-24 bg-sky-500/10 rounded-full blur-2xl transform group-hover:scale-150 transition-transform duration-700"></div>
          <div class="absolute -right-4 -bottom-4 w-24 h-24 bg-indigo-500/10 rounded-full blur-2xl transform group-hover:scale-150 transition-transform duration-700"></div>

          <!-- Enhanced Form Content -->
          <div class="relative">
            <div class="flex items-center gap-6 pb-4">
              <div class="p-4 rounded-2xl bg-gradient-to-br from-indigo-500 to-purple-500 shadow-lg transform hover:scale-105 transition-transform duration-300 group-hover:shadow-indigo-500/30">
                <i class="fas fa-user-plus text-white text-2xl animate-pulse"></i>
              </div>
              <div class="space-y-1">
                <h2 class="text-3xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent">
                  Create Your Account
                </h2>
                <p class="text-gray-600">Fill in your details below to get started with Kashika Travels</p>
              </div>
            </div>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="space-y-2">
              <label
                for="userName"
                class="text-sm font-medium text-slate-700 flex items-center gap-2"
              >
                <i class="fas fa-user text-slate-400"></i>
                Full Name
              </label>
              <input
                id="userName"
                placeholder="Anubhav Singh"
                class="w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-sky-500/20 focus:border-sky-500 transition-all"
                required
              />
            </div>

            <div class="space-y-2">
              <label
                for="email"
                class="text-sm font-medium text-slate-700 flex items-center gap-2"
              >
                <i class="fas fa-envelope text-slate-400"></i>
                Email Address
              </label>
              <input
                id="email"
                type="email"
                placeholder="abc@example.com"
                class="w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-sky-500/20 focus:border-sky-500 transition-all"
                required
              />
            </div>

            <div class="space-y-2">
              <label
                for="phone"
                class="text-sm font-medium text-slate-700 flex items-center gap-2"
              >
                <i class="fas fa-phone text-slate-400"></i>
                Phone Number
              </label>
              <input
                id="phone"
                placeholder="+91 1234567890"
                class="w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-sky-500/20 focus:border-sky-500 transition-all"
                required
              />
            </div>

            <div class="space-y-2">
              <label
                for="location"
                class="text-sm font-medium text-slate-700 flex items-center gap-2"
              >
                <i class="fas fa-location-dot text-slate-400"></i>
                City / Location
              </label>
              <input
                id="location"
                placeholder="Enter Complete Address"
                class="w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-sky-500/20 focus:border-sky-500 transition-all"
              />
            </div>

            <div class="space-y-2">
              <label
                for="password"
                class="text-sm font-medium text-slate-700 flex items-center gap-2"
              >
                <i class="fas fa-lock text-slate-400"></i>
                Password
              </label>
              <div class="relative group">
                <input
                  id="password"
                  type="password"
                  placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
                  class="w-full px-12 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-sky-500/20 focus:border-sky-500 transition-all"
                  required
                />
                <div class="absolute left-3 top-1/2 -translate-y-1/2">
                  <i id="passwordStrengthIcon" class="fas fa-circle-info text-slate-400"></i>
                </div>
                <button
                  type="button"
                  class="absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 transition-colors"
                  onclick="togglePassword('password')"
                >
                  <i class="fas fa-eye"></i>
                </button>
                <div id="passwordStrength" class="hidden absolute left-0 -bottom-20 w-64 p-3 bg-white/95 rounded-xl shadow-xl ring-1 ring-slate-100 z-10 backdrop-blur-sm text-sm">
                  <div class="space-y-2">
                    <div class="flex items-center gap-2">
                      <i id="lengthCheck" class="fas fa-circle text-xs text-slate-300"></i>
                      <span>At least 8 characters</span>
                    </div>
                    <div class="flex items-center gap-2">
                      <i id="mixedCaseCheck" class="fas fa-circle text-xs text-slate-300"></i>
                      <span>Upper & lowercase letters</span>
                    </div>
                    <div class="flex items-center gap-2">
                      <i id="numberCheck" class="fas fa-circle text-xs text-slate-300"></i>
                      <span>At least one number</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="space-y-2">
              <label
                for="confirmPassword"
                class="text-sm font-medium text-slate-700 flex items-center gap-2"
              >
                <i class="fas fa-shield-halved text-slate-400"></i>
                Confirm Password
              </label>
              <div class="relative group">
                <input
                  id="confirmPassword"
                  type="password"
                  placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
                  class="w-full px-12 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-sky-500/20 focus:border-sky-500 transition-all"
                  required
                />
                <div class="absolute left-3 top-1/2 -translate-y-1/2">
                  <i id="confirmPasswordIcon" class="fas fa-circle-check text-slate-400"></i>
                </div>
                <button
                  type="button"
                  class="absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 transition-colors"
                  onclick="togglePassword('confirmPassword')"
                >
                  <i class="fas fa-eye"></i>
                </button>
              </div>
            </div>
          </div>

          <div class="pt-6">
            <button
              type="button"
              id="getCodeBtn"
              class="w-full mb-4 py-4 px-6 bg-gradient-to-r from-emerald-500 to-green-500 hover:from-emerald-600 hover:to-green-600 text-white rounded-xl font-medium transition-all duration-500 transform hover:scale-[1.02] focus:scale-[0.98] flex items-center justify-center gap-3 group shadow-lg shadow-emerald-500/30 hover:shadow-green-500/30"
            >
              <span class="inline-flex items-center gap-2">
              <i class="fas fa-envelope group-hover:rotate-12 transition-transform"></i>
              Get Verification Code
              </span>
            </button>
            <button
              id="registerBtn"
              type="submit"
              class="w-full py-4 px-6 bg-gradient-to-r from-indigo-600 via-purple-600 to-indigo-600 hover:from-indigo-500 hover:via-purple-500 hover:to-indigo-500 text-white rounded-xl font-medium transition-all duration-500 transform hover:scale-[1.02] focus:scale-[0.98] flex items-center justify-center gap-3 group shadow-lg shadow-indigo-500/30 hover:shadow-purple-500/30 bg-[length:200%_200%] hover:bg-[position:100%_100%]"
            >
              <span class="inline-flex items-center gap-2">
                <i class="fas fa-user-plus group-hover:rotate-12 transition-transform"></i>
                Create Account
              </span>
            </button>


          </div>

          <div class="relative pt-6">
            <div class="absolute inset-0 flex items-center">
              <div class="w-full border-t border-gray-200"></div>
            </div>
            <div class="relative flex justify-center text-sm">
              <span class="px-6 py-2 bg-white/95 text-gray-500 rounded-full shadow-sm ring-1 ring-gray-100">Or</span>
            </div>
          </div>

          <div class="text-center text-sm text-gray-600 mt-4">
            Already have an account?
            <a href="/login"
               class="inline-flex items-center gap-2 font-medium text-indigo-600 hover:text-purple-600 transition-colors ml-2 group">
              <span class="border-b border-indigo-200 group-hover:border-purple-300">Sign in</span>
              <i class="fas fa-arrow-right text-xs group-hover:translate-x-1.5 transition-transform duration-300"></i>
            </a>
          </div>
        </form>
      </div>
    </main>

    <script type="module" src="./assets/js/DynamicNav.js"></script>
    <script type="module" src="./assets/js/otp.js"></script>
    <script type="module" src="./assets/js/tailwind-init.js"></script>
    <script>
      function togglePassword(inputId) {
        const input = document.getElementById(inputId);
        const icon = input.nextElementSibling.nextElementSibling.querySelector("i");

        if (input.type === "password") {
          input.type = "text";
          icon.classList.remove("fa-eye");
          icon.classList.add("fa-eye-slash");
        } else {
          input.type = "password";
          icon.classList.remove("fa-eye-slash");
          icon.classList.add("fa-eye");
        }
      }

      // Password strength indicator functionality
      const passwordInput = document.getElementById('password');
      const confirmPasswordInput = document.getElementById('confirmPassword');
      const strengthPopup = document.getElementById('passwordStrength');
      const strengthIcon = document.getElementById('passwordStrengthIcon');
      const confirmIcon = document.getElementById('confirmPasswordIcon');

      // Strength check elements
      const lengthCheck = document.getElementById('lengthCheck');
      const mixedCaseCheck = document.getElementById('mixedCaseCheck');
      const numberCheck = document.getElementById('numberCheck');

      // Show/hide password strength popup
      passwordInput.addEventListener('focus', () => {
        strengthPopup.classList.remove('hidden');
        strengthPopup.classList.add('animate-slide-up');
      });

      passwordInput.addEventListener('blur', () => {
        setTimeout(() => {
          strengthPopup.classList.add('hidden');
        }, 200);
      });

      function updatePasswordStrength(password) {
        const hasLength = password.length >= 8;
        const hasMixedCase = /[a-z]/.test(password) && /[A-Z]/.test(password);
        const hasNumber = /\d/.test(password);

        lengthCheck.className = `fas ${hasLength ? 'fa-circle-check text-emerald-500' : 'fa-circle text-slate-300'}`;
        mixedCaseCheck.className = `fas ${hasMixedCase ? 'fa-circle-check text-emerald-500' : 'fa-circle text-slate-300'}`;
        numberCheck.className = `fas ${hasNumber ? 'fa-circle-check text-emerald-500' : 'fa-circle text-slate-300'}`;

        if (hasLength && hasMixedCase && hasNumber) {
          strengthIcon.className = 'fas fa-shield-check text-emerald-500';
        } else if (password.length > 0) {
          strengthIcon.className = 'fas fa-shield-exclamation text-amber-500';
        } else {
          strengthIcon.className = 'fas fa-circle-info text-slate-400';
        }
      }

      function updateConfirmPassword() {
        const password = passwordInput.value;
        const confirmPassword = confirmPasswordInput.value;

        if (confirmPassword.length === 0) {
          confirmIcon.className = 'fas fa-circle-check text-slate-400';
        } else if (password === confirmPassword) {
          confirmIcon.className = 'fas fa-circle-check text-emerald-500';
        } else {
          confirmIcon.className = 'fas fa-circle-xmark text-rose-500';
        }
      }

      passwordInput.addEventListener('input', () => {
        updatePasswordStrength(passwordInput.value);
        updateConfirmPassword();
      });

      confirmPasswordInput.addEventListener('input', updateConfirmPassword);
    </script>
    <script type="module">
      import { registerUser } from "./assets/js/services.js";
      import { globalemail } from "./assets/js/otp.js";
      import { showToast, withLoader } from "./assets/js/tailwind-init.js";

      const form = document.getElementById("registerForm");
      const msg = document.getElementById("registerMessage");
      const btn = document.getElementById("registerBtn");

      // Toast notifications are handled by the imported showToast function

      function setLoading(isLoading) {
        const btnContent = btn.querySelector("span");
        if (isLoading) {
          btn.disabled = true;
          btn.classList.add("opacity-80");
          btnContent.innerHTML = `
            <div class="flex items-center gap-3">
              <svg class="animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
              </svg>
              Creating Account...
            </div>
          `;
        } else {
          btn.disabled = false;
          btn.classList.remove("opacity-80");
          btnContent.innerHTML = `
            <i class="fas fa-user-plus group-hover:rotate-12 transition-transform"></i>
            Create Account
          `;
        }
      }

      form.addEventListener("submit", async (e) => {
        e.preventDefault();

        const userName = document.getElementById("userName").value.trim();
        const email = document.getElementById("email").value.trim();
        const phone = document.getElementById("phone").value.trim();
        const location = document.getElementById("location").value.trim();
        const password = document.getElementById("password").value;
        const confirmPassword =
          document.getElementById("confirmPassword").value;
          const Gmail=await globalemail();
          if(Gmail!=email){
           showToast("Both Email Are not Same While otp", "error");
            return;
          }
          if (password !== confirmPassword) {
            showToast("Passwords do not match", "error");
            return;
          }

        const userData = { userName, email, phone, location, password };

        try {
          setLoading(true);
          const result = await registerUser(userData);

          if (result.error) {
            showToast(result.message || "Registration failed", "error");
          } else if (result.status) {
            showToast("ðŸŽ‰ " + (result.message || "Account created successfully!"), "success");
            form.reset();

            // Smooth redirect
            setTimeout(() => {
              const overlay = document.createElement("div");
              overlay.className =
                "fixed inset-0 bg-white transition-opacity duration-500 z-50";
              document.body.appendChild(overlay);
              setTimeout(() => {
                overlay.style.opacity = "1";
                setTimeout(() => {
                  window.location.href = "/";
                }, 500);
              }, 100);
            }, 1500);
          } else {
            showToast("Unexpected server response", "error");
          }
        } catch (error) {
          showToast("Registration failed: " + (error.message || "An unexpected error occurred"), "error");
        } finally {
          setLoading(false);
        }
      });
    </script>
    <!-- <script src="./assets/js/devloper.js"></script> -->
  </body>
</html>
